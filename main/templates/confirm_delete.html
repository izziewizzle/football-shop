<div id="deleteModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50">
    <div id="deleteModalContent" class="bg-white rounded-xl shadow-xl w-80 p-6 scale-95 opacity-0 transition-all duration-150 text-center">
        <h3 class="text-xl font-semibold text-[var(--ink)] mb-2">Confirm Deletion</h3>
        <p class="text-gray-600 mb-6">Are you sure you want to delete this product?</p>
        <div class="flex justify-center gap-4">
        <button onclick="hideDeleteModal()" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100">Cancel</button>
        <button id="confirmDeleteBtn" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">Delete</button>
        </div>
    </div>
    </div>

    <script>
    let productToDelete = null;

    // Buka modal konfirmasi delete
    function showDeleteModal(id) {
        productToDelete = id;
        const modal = document.getElementById("deleteModal");
        const modalContent = document.getElementById("deleteModalContent");
        modal.classList.remove("hidden");
        setTimeout(() => {
        modalContent.classList.remove("opacity-0", "scale-95");
        modalContent.classList.add("opacity-100", "scale-100");
        }, 50);
    }

    // Tutup modal konfirmasi delete
    function hideDeleteModal() {
        const modal = document.getElementById("deleteModal");
        const modalContent = document.getElementById("deleteModalContent");
        modalContent.classList.remove("opacity-100", "scale-100");
        modalContent.classList.add("opacity-0", "scale-95");
        setTimeout(() => modal.classList.add("hidden"), 150);
    }

    // Hapus produk via AJAX
    document.getElementById("confirmDeleteBtn").addEventListener("click", async function() {
        if (!productToDelete) return;
        try {
        const response = await fetch(`/product/${productToDelete}/delete`, {
            method: "POST",
            headers: { "X-Requested-With": "XMLHttpRequest" },
        });

        if (response.ok) {
            showToast("Deleted!", "Product removed successfully.", "success");
            hideDeleteModal();
            document.dispatchEvent(new CustomEvent("productAdded")); // refresh list
        } else {
            showToast("Error", "Failed to delete product.", "error");
        }
        } catch (error) {
        console.error(error);
        showToast("Error", "Something went wrong.", "error");
        }
    });
</script>
